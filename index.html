<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Stockfish WASM Test (No Worker)</title>
</head>
<body>
  <h2>Running Stockfish WASM...</h2>
  <pre id="log"></pre>

  <script>
  const log = (msg) => {
    console.log(msg);
    document.getElementById('log').textContent += msg + "\n";
  };

  (async () => {
    try {
      // تأكد إن الملف stockfish.js في نفس المجلد
      const sf = await Stockfish();
      log("Engine loaded!");

      sf.addMessageListener((line) => log("Engine: " + line));

      sf.postMessage("uci");
      sf.postMessage("isready");
      sf.postMessage("position startpos moves e2e4 e7e5 g1f3");
      sf.postMessage("go movetime 1000");
    } catch (err) {
      log("Error: " + err);
    }
  })();
  </script>

  <script src="stockfish.js"></script>
</body>
</html>
